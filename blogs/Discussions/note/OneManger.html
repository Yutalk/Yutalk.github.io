<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="/icon.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>基于OneManger-PHP的网盘项目搭建 | v2talk's blog</title><meta name="description" content="blog">
    <link rel="modulepreload" href="/assets/app.4542bc3b.js"><link rel="modulepreload" href="/assets/OneManger.html.00940d18.js"><link rel="modulepreload" href="/assets/OneManger.html.db552082.js"><link rel="prefetch" href="/assets/index.html.a6583f82.js"><link rel="prefetch" href="/assets/BelongedYou.html.9d35961f.js"><link rel="prefetch" href="/assets/Meet.html.37828bcb.js"><link rel="prefetch" href="/assets/alist.html.dc7765a9.js"><link rel="prefetch" href="/assets/Chrome.html.6f0716f7.js"><link rel="prefetch" href="/assets/Icloud.html.2211e979.js"><link rel="prefetch" href="/assets/JD.html.f8fd4359.js"><link rel="prefetch" href="/assets/Latency.html.ded21f44.js"><link rel="prefetch" href="/assets/LOLSkinPro.html.32450c35.js"><link rel="prefetch" href="/assets/storage.html.1d566a10.js"><link rel="prefetch" href="/assets/Vssue.html.bd55ea13.js"><link rel="prefetch" href="/assets/Zettelkasten.html.5344612b.js"><link rel="prefetch" href="/assets/Hannibal.html.2d89cac0.js"><link rel="prefetch" href="/assets/20221022.html.1b6bc619.js"><link rel="prefetch" href="/assets/20221028.html.994bd421.js"><link rel="prefetch" href="/assets/20221030.html.746e16a0.js"><link rel="prefetch" href="/assets/20221031.html.caf5ba1f.js"><link rel="prefetch" href="/assets/HelloWord.html.45c6862c.js"><link rel="prefetch" href="/assets/你好2023.html.32d50b5b.js"><link rel="prefetch" href="/assets/你真坏.html.2d77f646.js"><link rel="prefetch" href="/assets/再见2022.html.cd513c9c.js"><link rel="prefetch" href="/assets/想你的一天.html.258c954e.js"><link rel="prefetch" href="/assets/Git.html.0b5bfeaf.js"><link rel="prefetch" href="/assets/executable.html.d456c2b8.js"><link rel="prefetch" href="/assets/HelloRedHat.html.b61af0d2.js"><link rel="prefetch" href="/assets/ifconfig.html.263ad661.js"><link rel="prefetch" href="/assets/Manager.html.75e02ce6.js"><link rel="prefetch" href="/assets/latex.html.6c3aa02a.js"><link rel="prefetch" href="/assets/HelloHtml.html.9ea37f9c.js"><link rel="prefetch" href="/assets/Cadence SPB OrCAD Allegro 17.4.html.2e615a6f.js"><link rel="prefetch" href="/assets/MathType.html.fe395a65.js"><link rel="prefetch" href="/assets/SolidWorks.2022..html.04552d85.js"><link rel="prefetch" href="/assets/applyforssl.html.9d4ce83e.js"><link rel="prefetch" href="/assets/404.html.98e87f94.js"><link rel="prefetch" href="/assets/index.html.72ac4063.js"><link rel="prefetch" href="/assets/index.html.6bc7e811.js"><link rel="prefetch" href="/assets/index.html.46f4ba13.js"><link rel="prefetch" href="/assets/index.html.240b24ca.js"><link rel="prefetch" href="/assets/index.html.00582cf8.js"><link rel="prefetch" href="/assets/index.html.5c059117.js"><link rel="prefetch" href="/assets/index.html.9711ade1.js"><link rel="prefetch" href="/assets/index.html.1389f4e4.js"><link rel="prefetch" href="/assets/index.html.a053fcea.js"><link rel="prefetch" href="/assets/index.html.f8ad89d9.js"><link rel="prefetch" href="/assets/index.html.715cd268.js"><link rel="prefetch" href="/assets/index.html.dfdadd4e.js"><link rel="prefetch" href="/assets/index.html.e5603099.js"><link rel="prefetch" href="/assets/index.html.ee0030d4.js"><link rel="prefetch" href="/assets/index.html.ec837997.js"><link rel="prefetch" href="/assets/index.html.333f8a71.js"><link rel="prefetch" href="/assets/index.html.4f82f947.js"><link rel="prefetch" href="/assets/index.html.b57762aa.js"><link rel="prefetch" href="/assets/index.html.08b3a957.js"><link rel="prefetch" href="/assets/index.html.9cbf2d78.js"><link rel="prefetch" href="/assets/index.html.4bc70fa1.js"><link rel="prefetch" href="/assets/index.html.596d0ca7.js"><link rel="prefetch" href="/assets/BelongedYou.html.4fd9e2f4.js"><link rel="prefetch" href="/assets/Meet.html.683342ab.js"><link rel="prefetch" href="/assets/alist.html.ad188209.js"><link rel="prefetch" href="/assets/Chrome.html.0b169214.js"><link rel="prefetch" href="/assets/Icloud.html.e47fb531.js"><link rel="prefetch" href="/assets/JD.html.2b96f9e3.js"><link rel="prefetch" href="/assets/Latency.html.1017c067.js"><link rel="prefetch" href="/assets/LOLSkinPro.html.ea83d8b8.js"><link rel="prefetch" href="/assets/storage.html.b460e44c.js"><link rel="prefetch" href="/assets/Vssue.html.bc6d3842.js"><link rel="prefetch" href="/assets/Zettelkasten.html.61af766d.js"><link rel="prefetch" href="/assets/Hannibal.html.480eb810.js"><link rel="prefetch" href="/assets/20221022.html.9b6a2685.js"><link rel="prefetch" href="/assets/20221028.html.725d4927.js"><link rel="prefetch" href="/assets/20221030.html.d015a7aa.js"><link rel="prefetch" href="/assets/20221031.html.1c51756c.js"><link rel="prefetch" href="/assets/HelloWord.html.0ee1a6d0.js"><link rel="prefetch" href="/assets/你好2023.html.608781e6.js"><link rel="prefetch" href="/assets/你真坏.html.ea400b28.js"><link rel="prefetch" href="/assets/再见2022.html.dd65c3d4.js"><link rel="prefetch" href="/assets/想你的一天.html.cb2bc0f0.js"><link rel="prefetch" href="/assets/Git.html.5d392ee2.js"><link rel="prefetch" href="/assets/executable.html.3e7e4508.js"><link rel="prefetch" href="/assets/HelloRedHat.html.53300655.js"><link rel="prefetch" href="/assets/ifconfig.html.670eaaa8.js"><link rel="prefetch" href="/assets/Manager.html.67ad5502.js"><link rel="prefetch" href="/assets/latex.html.642e2503.js"><link rel="prefetch" href="/assets/HelloHtml.html.34576696.js"><link rel="prefetch" href="/assets/Cadence SPB OrCAD Allegro 17.4.html.0b302aaa.js"><link rel="prefetch" href="/assets/MathType.html.db64e225.js"><link rel="prefetch" href="/assets/SolidWorks.2022..html.79e9da22.js"><link rel="prefetch" href="/assets/applyforssl.html.ce12a508.js"><link rel="prefetch" href="/assets/404.html.149fc7d4.js"><link rel="prefetch" href="/assets/index.html.c14ba4c7.js"><link rel="prefetch" href="/assets/index.html.3048f501.js"><link rel="prefetch" href="/assets/index.html.5ff14b33.js"><link rel="prefetch" href="/assets/index.html.2cfdb869.js"><link rel="prefetch" href="/assets/index.html.b4035988.js"><link rel="prefetch" href="/assets/index.html.3cbd4c31.js"><link rel="prefetch" href="/assets/index.html.2721c5ca.js"><link rel="prefetch" href="/assets/index.html.4b8dbedd.js"><link rel="prefetch" href="/assets/index.html.dd6f8d1e.js"><link rel="prefetch" href="/assets/index.html.886b903b.js"><link rel="prefetch" href="/assets/index.html.e32da0f4.js"><link rel="prefetch" href="/assets/index.html.5f0e0551.js"><link rel="prefetch" href="/assets/index.html.dfe4568b.js"><link rel="prefetch" href="/assets/index.html.038a831e.js"><link rel="prefetch" href="/assets/index.html.8294bc09.js"><link rel="prefetch" href="/assets/index.html.b0e73822.js"><link rel="prefetch" href="/assets/index.html.8a841c76.js"><link rel="prefetch" href="/assets/index.html.64cd92e7.js"><link rel="prefetch" href="/assets/index.html.969956b5.js"><link rel="prefetch" href="/assets/index.html.2904b552.js"><link rel="prefetch" href="/assets/index.html.7ff792d6.js"><link rel="prefetch" href="/assets/reco-valine.ed4545b0.js">
    <link rel="stylesheet" href="/assets/style.8e5b1768.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper no-sidebar"><div><header class="navbar-container"><span class="nav-item site-brand"><a href="/" class=""><!--v-if--><span class="site-name">v2talk&#39;s blog</span></a></span><div class="nav-item navbar-links-wrapper" style=""><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Categories">Categories <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Categories"><span class="title"><span>Categories</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Tags">Tags <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Tags"><span class="title"><span>Tags</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><!--]--></ul></div></div><!--]--></nav><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:19px;height:19px;font-size:19px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a><a class="icon-container left btn-toggle-menus" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="19" r="1"></circle><circle cx="12" cy="5" r="1"></circle></g></svg><!----></a></div></header><div class="mobile-menus-container"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Categories">Categories <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Categories"><span class="title"><span>Categories</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Tags">Tags <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Tags"><span class="title"><span>Tags</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance </span><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:19px;height:19px;font-size:19px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a></div></div><div class="sidebar-mask"></div><aside class="series-container"><!--[--><!--]--></aside><!--[--><main class="page-container show-catalog"><h1 class="page-title">基于OneManger-PHP的网盘项目搭建</h1><div class="page-info"><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"></circle><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->v2talk<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 7v5l3 3"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->2022-10-23 12:00:00<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->Discussions<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8.5" cy="8.5" r="1" fill="currentColor"></circle><path d="M4 7v3.859c0 .537.213 1.052.593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834-4.834a2.025 2.025 0 0 0 0-2.864L12.29 4.593A2.025 2.025 0 0 0 10.859 4H7a3 3 0 0 0-3 3z"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->note<!--]--></span></a><!----></div><div class="theme-reco-default-content"><div><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><blockquote><p>OneManager和其他的索引程序一样都是通过调用Onedrive的API实现映射网盘目录，可以实现直链下载</p></blockquote><h2 id="开始" tabindex="-1"><a class="header-anchor" href="#开始" aria-hidden="true">#</a> 开始</h2><h3 id="onemanage" tabindex="-1"><a class="header-anchor" href="#onemanage" aria-hidden="true">#</a> OneManage</h3><p>Github地址：<a href="https://github.com/qkqpttgf/OneManager-php" target="_blank" rel="noopener noreferrer">OneManager<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>腾讯云函数的突然收费迫使弃用之前的OneManager项目</p><p>前车之鉴，本次部署平台选用 <a href="https://glitch.com/" target="_blank" rel="noopener noreferrer">Glitch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，配合CDN实现国内访问</p></div><h3 id="部署" tabindex="-1"><a class="header-anchor" href="#部署" aria-hidden="true">#</a> 部署</h3><p>参考项目文档</p><ol><li>登录 <a href="https://glitch.com/" target="_blank" rel="noopener noreferrer">Glitch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>New Project</li><li>Import from github</li><li>输入：https://github.com/qkqpttgf/OneManager-php</li><li>导入项目文件后，转入项目页面</li><li>Settings - Go to project page</li><li>Visit，启动安装界面</li></ol><h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h3><ol><li>添加Onedrive盘</li><li>MS:国际版，点击申请应用ID和机密</li><li>登录Azure</li><li>应用注册：支持账户类型：任何组织目录；重定向：WEB：https://scfonedrive.github.io</li><li>保存<strong>应用程序(客户端) ID</strong>，即 client_id</li><li>生成密码：保存 <strong>Value</strong> ，即 client_secret</li><li>API权限：开放<strong>Microsoft Graph</strong>下的 <strong>Files.ReadWrite.All</strong>及<strong>Sites.ReadWrite.All</strong></li><li>安装界面：选择 Use Onedrive，完成设置</li></ol><h3 id="平台变量配置" tabindex="-1"><a class="header-anchor" href="#平台变量配置" aria-hidden="true">#</a> 平台变量配置</h3><h4 id="adminloginpage" tabindex="-1"><a class="header-anchor" href="#adminloginpage" aria-hidden="true">#</a> adminloginpage</h4><p>自定义登录地址。隐藏登录按钮(有些主题本来就没有登录按钮)，登录时需要手动在网盘地址后加上<code>?你设置的值</code>进行登录。比如设置为<code>v2talk</code>，那么你只能通过<code>http://xxx.com?login=v2talk</code>地址来登录 。</p><h4 id="background" tabindex="-1"><a class="header-anchor" href="#background" aria-hidden="true">#</a> background</h4><p>自定义背景图片，填入一个图片的url地址，因为图片加载通常需要更多时间，为了速度考虑不建议放入大体积图片。</p><h4 id="customcss" tabindex="-1"><a class="header-anchor" href="#customcss" aria-hidden="true">#</a> customCss</h4><p>设置自定义css的地方，这里设置的css会作用于网盘所有页面。 比如隐藏语言选项框：</p><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">&lt;style&gt;.changelanguage</span><span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">}</span>&lt;/style&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="customscript" tabindex="-1"><a class="header-anchor" href="#customscript" aria-hidden="true">#</a> customScript</h4><p>设置自定义js，会作用于所有页面。 比如设置http重定向到https：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> targetProtocol <span class="token operator">=</span> <span class="token string">&quot;https:&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol <span class="token operator">!=</span> targetProtocol<span class="token punctuation">)</span>
        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> targetProtocol <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="disablechangetheme" tabindex="-1"><a class="header-anchor" href="#disablechangetheme" aria-hidden="true">#</a> disableChangeTheme</h4><p>设置为<code>1</code>，游客将不显示右下角的主题切换功能。</p><h4 id="disableshowthumb" tabindex="-1"><a class="header-anchor" href="#disableshowthumb" aria-hidden="true">#</a> disableShowThumb</h4><p>设置为<code>1</code>，不显示缩略图的按钮和功能。</p><h4 id="hidefunctionalityfile" tabindex="-1"><a class="header-anchor" href="#hidefunctionalityfile" aria-hidden="true">#</a> hideFunctionalityFile</h4><p>设置为<code>1</code>，隐藏功能文件</p><h4 id="passfile" tabindex="-1"><a class="header-anchor" href="#passfile" aria-hidden="true">#</a> passfile</h4><p>设置密码文件名。设置为password.txt，在加密目录下新建一个password.txt文件，其中写入密码，实现加密访问</p><h4 id="sitename" tabindex="-1"><a class="header-anchor" href="#sitename" aria-hidden="true">#</a> sitename</h4><p>设置网站名称。</p><h4 id="theme" tabindex="-1"><a class="header-anchor" href="#theme" aria-hidden="true">#</a> theme</h4><p>切换主题。</p><h4 id="timezone" tabindex="-1"><a class="header-anchor" href="#timezone" aria-hidden="true">#</a> timezone</h4><p>设置时区为 <code>8</code> 。</p><h4 id="downloadencrypt" tabindex="-1"><a class="header-anchor" href="#downloadencrypt" aria-hidden="true">#</a> downloadencrypt</h4><p>设置为<code>1</code>，加密目录下的文件仍然可以通过具体的文件链接进行下载。</p><h4 id="guestup-path" tabindex="-1"><a class="header-anchor" href="#guestup-path" aria-hidden="true">#</a> guestup_path</h4><p>游客上传路径，设置后游客只能看到上传按钮看不到目录下的文件。</p><h4 id="public-path" tabindex="-1"><a class="header-anchor" href="#public-path" aria-hidden="true">#</a> public_path</h4><p>设置显示的文件夹，默认显示全部。 比如当只想将网盘下的public文件夹内容作为网盘，可以设置为<code>/public/</code>。 可以通过重复绑定同一个账号来生成多盘，然后每个盘的public_path设置为不同的路径，实现多盘。</p><hr><p>有一种特殊情况：</p><p>既有游客上传文件的需求，又有查看文件的需求，目前可以通过<code>Guestup_path</code> &amp;&amp;<code> Public_path</code>的方式将一个目录设置为两个网盘（copy），一个作为<code>Guestup</code>，一个作为<code>Public</code>。</p><h3 id="进阶设置" tabindex="-1"><a class="header-anchor" href="#进阶设置" aria-hidden="true">#</a> 进阶设置</h3><h4 id="设置网站ico图标" tabindex="-1"><a class="header-anchor" href="#设置网站ico图标" aria-hidden="true">#</a> 设置网站ico图标</h4><p>将favicon.ico图片放在<code>No.1</code>网盘根目录下。也可以在customCss或customScript中进行全局设置：</p><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code>&lt;link rel=<span class="token string">&quot;icon&quot;</span> href=<span class="token string">&quot;https://cloud.tencent.com/favicon.ico&quot;</span> type=<span class="token string">&quot;image/x-icon&quot;</span>&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="利用index-html设置自定义页面" tabindex="-1"><a class="header-anchor" href="#利用index-html设置自定义页面" aria-hidden="true">#</a> 利用index.html设置自定义页面</h4><p>如果一个目录下有名为index.html的文件，则直接显示该文件，可以利用这个功能设置一个自定义页面或者用于隐藏一个特定页面，相当于部署了一个静态页面。</p><h4 id="设置顶部和底部说明文字" tabindex="-1"><a class="header-anchor" href="#设置顶部和底部说明文字" aria-hidden="true">#</a> 设置顶部和底部说明文字</h4><p><code>head.md</code>文件，对应顶部说明文件；<code>readme.md</code>文件，对应底部说明文件。</p><h4 id="利用head-omf设置一言" tabindex="-1"><a class="header-anchor" href="#利用head-omf设置一言" aria-hidden="true">#</a> 利用head.omf设置一言</h4><p><code>head.omf</code>支持html语言，一言API调用如下：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hitokoto<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>:D 获取中...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://v1.hitokoto.cn&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> hitokoto <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;hitokoto&#39;</span><span class="token punctuation">)</span>
            hitokoto<span class="token punctuation">.</span>innerText <span class="token operator">=</span> data<span class="token punctuation">.</span>hitokoto
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>通过调用onedrive的API实现无服务器直链下载，配合IDM等多线程下载器，基本实现全速下载。</p><h6 id="注-glitch的调用规则会在无网络请求是暂时关闭服务-响应请求时重启服务" tabindex="-1"><a class="header-anchor" href="#注-glitch的调用规则会在无网络请求是暂时关闭服务-响应请求时重启服务" aria-hidden="true">#</a> 注：Glitch的调用规则会在无网络请求是暂时关闭服务，响应请求时重启服务</h6></div></div><footer class="page-meta"><!----><!----></footer><!----><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Discussions/note/OneManger.html#前言" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Discussions/note/OneManger.html#开始" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="开始"><!--[--><!--]--> 开始 <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Discussions/note/OneManger.html#onemanage" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="OneManage"><!--[--><!--]--> OneManage <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Discussions/note/OneManger.html#部署" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Discussions/note/OneManger.html#配置" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Discussions/note/OneManger.html#平台变量配置" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="平台变量配置"><!--[--><!--]--> 平台变量配置 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Discussions/note/OneManger.html#进阶设置" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="进阶设置"><!--[--><!--]--> 进阶设置 <!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Discussions/note/OneManger.html#总结" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a></li><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.4542bc3b.js" defer></script>
  </body>
</html>
